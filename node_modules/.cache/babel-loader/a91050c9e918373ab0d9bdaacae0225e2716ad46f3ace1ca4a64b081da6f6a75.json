{"ast":null,"code":"import axios from'axios';import{config}from'../../Constants';import{parseJwt}from'./Helpers';export const backApi={authenticate,signup,numberOfUsers,getUserMe,getCurrentExchangeRates,transferCurrency,getAllTransactions,createTransaction,getTransactionById,deleteTransaction,getUserById,updateUser,deleteUser,getWalletById,getBankCardForCurrentUser};function authenticate(username,password){return instance.post('/auth/authenticate',{username,password},{headers:{'Content-type':'application/json'}});}function signup(user){return instance.post('/auth/signup',user,{headers:{'Content-type':'application/json'}});}function numberOfUsers(){return instance.get('/public/numberOfUsers');}function getUserMe(user){return instance.get('/api/users/me',{headers:{'Authorization':bearerAuth(user)}});}// -- Bank Card API functions\nfunction getBankCardForCurrentUser(user){return instance.get('/api/card',{headers:{'Authorization':bearerAuth(user)}});}// -- Exchange Rates API functions\nfunction getAllExchangeRates(){return instance.get('/api/exchange-rates');}function getExchangeRateById(id){return instance.get(\"/api/exchange-rates/\".concat(id));}function createExchangeRate(exchangeRateDto){return instance.post('/api/exchange-rates',exchangeRateDto,{headers:{'Content-type':'application/json'}});}function updateExchangeRate(id,exchangeRateDto){return instance.put(\"/api/exchange-rates/\".concat(id),exchangeRateDto,{headers:{'Content-type':'application/json'}});}function deleteExchangeRate(id){return instance.delete(\"/api/exchange-rates/\".concat(id));}function getCurrentExchangeRates(){return instance.get('/api/exchange-rates/current');}// -- Wallet API functions\nfunction getWalletById(user){return instance.get('/api/wallets',{headers:{'Authorization':bearerAuth(user)}});}function transferCurrency(user,fromCurrency,toCurrency,amount){return instance.post('/api/wallets/transfer',{fromCurrency,toCurrency,amount},{headers:{'Content-type':'application/json','Authorization':bearerAuth(user)}});}// -- Transaction API functions\nfunction getAllTransactions(user){return instance.get('/api/transactions',{headers:{'Authorization':bearerAuth(user)}});}function createTransaction(transaction,user){return instance.post('/api/transactions',transaction,{headers:{'Content-type':'application/json','Authorization':bearerAuth(user)}});}function getTransactionById(id,user){return instance.get(\"/api/transactions/\".concat(id),{headers:{'Authorization':bearerAuth(user)}});}function deleteTransaction(id,user){return instance.delete(\"/api/transactions/\".concat(id),{headers:{'Authorization':bearerAuth(user)}});}// -- User API functions\nfunction getUserById(id,user){return instance.get(\"/api/users/\".concat(id),{headers:{'Authorization':bearerAuth(user)}});}function updateUser(id,userDto,user){return instance.put(\"/api/users/\".concat(id),userDto,{headers:{'Content-type':'application/json','Authorization':bearerAuth(user)}});}function deleteUser(id,user){return instance.delete(\"/api/users/\".concat(id),{headers:{'Authorization':bearerAuth(user)}});}// -- Axios\nconst instance=axios.create({baseURL:config.url.API_BASE_URL});instance.interceptors.request.use(function(config){// If token is expired, redirect user to login\nif(config.headers.Authorization){const token=config.headers.Authorization.split(' ')[1];const data=parseJwt(token);if(Date.now()>data.exp*1000){window.location.href=\"/login\";}}return config;},function(error){return Promise.reject(error);});// -- Helper functions\nfunction bearerAuth(user){return\"Bearer \".concat(user.accessToken);}","map":{"version":3,"names":["axios","config","parseJwt","backApi","authenticate","signup","numberOfUsers","getUserMe","getCurrentExchangeRates","transferCurrency","getAllTransactions","createTransaction","getTransactionById","deleteTransaction","getUserById","updateUser","deleteUser","getWalletById","getBankCardForCurrentUser","username","password","instance","post","headers","user","get","bearerAuth","getAllExchangeRates","getExchangeRateById","id","concat","createExchangeRate","exchangeRateDto","updateExchangeRate","put","deleteExchangeRate","delete","fromCurrency","toCurrency","amount","transaction","userDto","create","baseURL","url","API_BASE_URL","interceptors","request","use","Authorization","token","split","data","Date","now","exp","window","location","href","error","Promise","reject","accessToken"],"sources":["/Users/timurinamkhojayev/Desktop/demo-crypto/order-ui/src/components/misc/BackApi.js"],"sourcesContent":["import axios from 'axios'\nimport { config } from '../../Constants'\nimport { parseJwt } from './Helpers'\n\nexport const backApi = {\n  authenticate,\n  signup,\n  numberOfUsers,\n  getUserMe,\n  getCurrentExchangeRates,\n  transferCurrency,\n  getAllTransactions,\n  createTransaction,\n  getTransactionById,\n  deleteTransaction,\n  getUserById,\n  updateUser,\n  deleteUser,\n  getWalletById,\n  getBankCardForCurrentUser\n}\n\nfunction authenticate(username, password) {\n  return instance.post('/auth/authenticate', { username, password }, {\n    headers: { 'Content-type': 'application/json' }\n  })\n}\n\nfunction signup(user) {\n  return instance.post('/auth/signup', user, {\n    headers: { 'Content-type': 'application/json' }\n  })\n}\n\nfunction numberOfUsers() {\n  return instance.get('/public/numberOfUsers')\n}\n\nfunction getUserMe(user) {\n  return instance.get('/api/users/me', {\n    headers: { 'Authorization': bearerAuth(user) }\n  })\n}\n\n\n// -- Bank Card API functions\n\nfunction getBankCardForCurrentUser(user) {\n  return instance.get('/api/card', {\n    headers: { 'Authorization': bearerAuth(user) }\n  });\n}\n\n\n// -- Exchange Rates API functions\n\nfunction getAllExchangeRates() {\n  return instance.get('/api/exchange-rates');\n}\n\nfunction getExchangeRateById(id) {\n  return instance.get(`/api/exchange-rates/${id}`);\n}\n\nfunction createExchangeRate(exchangeRateDto) {\n  return instance.post('/api/exchange-rates', exchangeRateDto, {\n    headers: { 'Content-type': 'application/json' }\n  });\n}\n\nfunction updateExchangeRate(id, exchangeRateDto) {\n  return instance.put(`/api/exchange-rates/${id}`, exchangeRateDto, {\n    headers: { 'Content-type': 'application/json' }\n  });\n}\n\nfunction deleteExchangeRate(id) {\n  return instance.delete(`/api/exchange-rates/${id}`);\n}\n\nfunction getCurrentExchangeRates() {\n  return instance.get('/api/exchange-rates/current');\n}\n\n// -- Wallet API functions\n\nfunction getWalletById(user) {\n  return instance.get('/api/wallets', {\n    headers: { 'Authorization': bearerAuth(user) }\n  });\n}\n\nfunction transferCurrency(user, fromCurrency, toCurrency, amount) {\n  return instance.post('/api/wallets/transfer', {\n    fromCurrency,\n    toCurrency,\n    amount\n  }, {\n    headers: { 'Content-type': 'application/json', 'Authorization': bearerAuth(user) }\n  });\n}\n\n// -- Transaction API functions\n\nfunction getAllTransactions(user) {\n  return instance.get('/api/transactions', {\n    headers: { 'Authorization': bearerAuth(user) }\n  });\n}\n\n\n\nfunction createTransaction(transaction, user) {\n  return instance.post('/api/transactions', transaction, {\n    headers: {\n      'Content-type': 'application/json',\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\n\nfunction getTransactionById(id, user) {\n  return instance.get(`/api/transactions/${id}`, {\n    headers: { 'Authorization': bearerAuth(user) }\n  });\n}\n\nfunction deleteTransaction(id, user) {\n  return instance.delete(`/api/transactions/${id}`, {\n    headers: { 'Authorization': bearerAuth(user) }\n  });\n}\n\n// -- User API functions\n\nfunction getUserById(id, user) {\n  return instance.get(`/api/users/${id}`, {\n    headers: { 'Authorization': bearerAuth(user) }\n  });\n}\n\nfunction updateUser(id, userDto, user) {\n  return instance.put(`/api/users/${id}`, userDto, {\n    headers: {\n      'Content-type': 'application/json',\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\n\nfunction deleteUser(id, user) {\n  return instance.delete(`/api/users/${id}`, {\n    headers: { 'Authorization': bearerAuth(user) }\n  });\n}\n\n// -- Axios\n\nconst instance = axios.create({\n  baseURL: config.url.API_BASE_URL\n})\n\ninstance.interceptors.request.use(function (config) {\n  // If token is expired, redirect user to login\n  if (config.headers.Authorization) {\n    const token = config.headers.Authorization.split(' ')[1]\n    const data = parseJwt(token)\n    if (Date.now() > data.exp * 1000) {\n      window.location.href = \"/login\"\n    }\n  }\n  return config\n}, function (error) {\n  return Promise.reject(error)\n})\n\n// -- Helper functions\n\nfunction bearerAuth(user) {\n  return `Bearer ${user.accessToken}`\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import axios from 'axios';\nimport { config } from '../../Constants';\nimport { parseJwt } from './Helpers';\nexport const backApi = {\n  authenticate,\n  signup,\n  numberOfUsers,\n  getUserMe,\n  getCurrentExchangeRates,\n  transferCurrency,\n  getAllTransactions,\n  createTransaction,\n  getTransactionById,\n  deleteTransaction,\n  getUserById,\n  updateUser,\n  deleteUser,\n  getWalletById\n};\nfunction authenticate(username, password) {\n  return instance.post('/auth/authenticate', {\n    username,\n    password\n  }, {\n    headers: {\n      'Content-type': 'application/json'\n    }\n  });\n}\nfunction signup(user) {\n  return instance.post('/auth/signup', user, {\n    headers: {\n      'Content-type': 'application/json'\n    }\n  });\n}\nfunction numberOfUsers() {\n  return instance.get('/public/numberOfUsers');\n}\nfunction getUserMe(user) {\n  return instance.get('/api/users/me', {\n    headers: {\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\n\n// -- Exchange Rates API functions\n\nfunction getAllExchangeRates() {\n  return instance.get('/api/exchange-rates');\n}\nfunction getExchangeRateById(id) {\n  return instance.get(`/api/exchange-rates/${id}`);\n}\nfunction createExchangeRate(exchangeRateDto) {\n  return instance.post('/api/exchange-rates', exchangeRateDto, {\n    headers: {\n      'Content-type': 'application/json'\n    }\n  });\n}\nfunction updateExchangeRate(id, exchangeRateDto) {\n  return instance.put(`/api/exchange-rates/${id}`, exchangeRateDto, {\n    headers: {\n      'Content-type': 'application/json'\n    }\n  });\n}\nfunction deleteExchangeRate(id) {\n  return instance.delete(`/api/exchange-rates/${id}`);\n}\nfunction getCurrentExchangeRates() {\n  return instance.get('/api/exchange-rates/current');\n}\n\n// -- Wallet API functions\n\nfunction getWalletById(user) {\n  return instance.get('/api/wallets', {\n    headers: {\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\nfunction transferCurrency(user, fromCurrency, toCurrency, amount) {\n  return instance.post('/api/wallets/transfer', {\n    fromCurrency,\n    toCurrency,\n    amount\n  }, {\n    headers: {\n      'Content-type': 'application/json',\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\n\n// -- Transaction API functions\n\nfunction getAllTransactions(user) {\n  return instance.get('/api/transactions', {\n    headers: {\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\nfunction createTransaction(transaction, user) {\n  return instance.post('/api/transactions', transaction, {\n    headers: {\n      'Content-type': 'application/json',\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\nfunction getTransactionById(id, user) {\n  return instance.get(`/api/transactions/${id}`, {\n    headers: {\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\nfunction deleteTransaction(id, user) {\n  return instance.delete(`/api/transactions/${id}`, {\n    headers: {\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\n\n// -- User API functions\n\nfunction getUserById(id, user) {\n  return instance.get(`/api/users/${id}`, {\n    headers: {\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\nfunction updateUser(id, userDto, user) {\n  return instance.put(`/api/users/${id}`, userDto, {\n    headers: {\n      'Content-type': 'application/json',\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\nfunction deleteUser(id, user) {\n  return instance.delete(`/api/users/${id}`, {\n    headers: {\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\n\n// -- Axios\n\nconst instance = axios.create({\n  baseURL: config.url.API_BASE_URL\n});\ninstance.interceptors.request.use(function (config) {\n  // If token is expired, redirect user to login\n  if (config.headers.Authorization) {\n    const token = config.headers.Authorization.split(' ')[1];\n    const data = parseJwt(token);\n    if (Date.now() > data.exp * 1000) {\n      window.location.href = \"/login\";\n    }\n  }\n  return config;\n}, function (error) {\n  return Promise.reject(error);\n});\n\n// -- Helper functions\n\nfunction bearerAuth(user) {\n  return `Bearer ${user.accessToken}`;\n}","map":{"version":3,"names":["axios","config","parseJwt","backApi","authenticate","signup","numberOfUsers","getUserMe","getCurrentExchangeRates","transferCurrency","getAllTransactions","createTransaction","getTransactionById","deleteTransaction","getUserById","updateUser","deleteUser","getWalletById","username","password","instance","post","headers","user","get","bearerAuth","getAllExchangeRates","getExchangeRateById","id","createExchangeRate","exchangeRateDto","updateExchangeRate","put","deleteExchangeRate","delete","fromCurrency","toCurrency","amount","transaction","userDto","create","baseURL","url","API_BASE_URL","interceptors","request","use","Authorization","token","split","data","Date","now","exp","window","location","href","error","Promise","reject","accessToken"],"sources":["/Users/timurinamkhojayev/Desktop/demo-crypto/order-ui/src/components/misc/BackApi.js"],"sourcesContent":["import axios from 'axios'\nimport { config } from '../../Constants'\nimport { parseJwt } from './Helpers'\n\nexport const backApi = {\n  authenticate,\n  signup,\n  numberOfUsers,\n  getUserMe,\n  getCurrentExchangeRates,\n  transferCurrency,\n  getAllTransactions,\n  createTransaction,\n  getTransactionById,\n  deleteTransaction,\n  getUserById,\n  updateUser,\n  deleteUser,\n  getWalletById\n}\n\nfunction authenticate(username, password) {\n  return instance.post('/auth/authenticate', { username, password }, {\n    headers: { 'Content-type': 'application/json' }\n  })\n}\n\nfunction signup(user) {\n  return instance.post('/auth/signup', user, {\n    headers: { 'Content-type': 'application/json' }\n  })\n}\n\nfunction numberOfUsers() {\n  return instance.get('/public/numberOfUsers')\n}\n\nfunction getUserMe(user) {\n  return instance.get('/api/users/me', {\n    headers: { 'Authorization': bearerAuth(user) }\n  })\n}\n\n// -- Exchange Rates API functions\n\nfunction getAllExchangeRates() {\n  return instance.get('/api/exchange-rates');\n}\n\nfunction getExchangeRateById(id) {\n  return instance.get(`/api/exchange-rates/${id}`);\n}\n\nfunction createExchangeRate(exchangeRateDto) {\n  return instance.post('/api/exchange-rates', exchangeRateDto, {\n    headers: { 'Content-type': 'application/json' }\n  });\n}\n\nfunction updateExchangeRate(id, exchangeRateDto) {\n  return instance.put(`/api/exchange-rates/${id}`, exchangeRateDto, {\n    headers: { 'Content-type': 'application/json' }\n  });\n}\n\nfunction deleteExchangeRate(id) {\n  return instance.delete(`/api/exchange-rates/${id}`);\n}\n\nfunction getCurrentExchangeRates() {\n  return instance.get('/api/exchange-rates/current');\n}\n\n// -- Wallet API functions\n\nfunction getWalletById(user) {\n  return instance.get('/api/wallets', {\n    headers: { 'Authorization': bearerAuth(user) }\n  });\n}\n\nfunction transferCurrency(user, fromCurrency, toCurrency, amount) {\n  return instance.post('/api/wallets/transfer', {\n    fromCurrency,\n    toCurrency,\n    amount\n  }, {\n    headers: { 'Content-type': 'application/json', 'Authorization': bearerAuth(user) }\n  });\n}\n\n// -- Transaction API functions\n\nfunction getAllTransactions(user) {\n  return instance.get('/api/transactions', {\n    headers: { 'Authorization': bearerAuth(user) }\n  });\n}\n\n\n\nfunction createTransaction(transaction, user) {\n  return instance.post('/api/transactions', transaction, {\n    headers: {\n      'Content-type': 'application/json',\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\n\nfunction getTransactionById(id, user) {\n  return instance.get(`/api/transactions/${id}`, {\n    headers: { 'Authorization': bearerAuth(user) }\n  });\n}\n\nfunction deleteTransaction(id, user) {\n  return instance.delete(`/api/transactions/${id}`, {\n    headers: { 'Authorization': bearerAuth(user) }\n  });\n}\n\n// -- User API functions\n\nfunction getUserById(id, user) {\n  return instance.get(`/api/users/${id}`, {\n    headers: { 'Authorization': bearerAuth(user) }\n  });\n}\n\nfunction updateUser(id, userDto, user) {\n  return instance.put(`/api/users/${id}`, userDto, {\n    headers: {\n      'Content-type': 'application/json',\n      'Authorization': bearerAuth(user)\n    }\n  });\n}\n\nfunction deleteUser(id, user) {\n  return instance.delete(`/api/users/${id}`, {\n    headers: { 'Authorization': bearerAuth(user) }\n  });\n}\n\n// -- Axios\n\nconst instance = axios.create({\n  baseURL: config.url.API_BASE_URL\n})\n\ninstance.interceptors.request.use(function (config) {\n  // If token is expired, redirect user to login\n  if (config.headers.Authorization) {\n    const token = config.headers.Authorization.split(' ')[1]\n    const data = parseJwt(token)\n    if (Date.now() > data.exp * 1000) {\n      window.location.href = \"/login\"\n    }\n  }\n  return config\n}, function (error) {\n  return Promise.reject(error)\n})\n\n// -- Helper functions\n\nfunction bearerAuth(user) {\n  return `Bearer ${user.accessToken}`\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
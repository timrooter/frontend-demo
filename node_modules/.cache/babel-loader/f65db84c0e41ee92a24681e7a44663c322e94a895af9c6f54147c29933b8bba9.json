{"ast":null,"code":"import React,{useState}from'react';import{NavLink,Navigate}from'react-router-dom';import{Button,Form,Grid,Segment,Message,Container}from'semantic-ui-react';import{useAuth}from'../context/AuthContext';import{backApi}from'../misc/BackApi';import{parseJwt,handleLogError}from'../misc/Helpers';import Footer from\"../misc/Footer\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const Auth=useAuth();const isLoggedIn=Auth.userIsAuthenticated();const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[isError,setIsError]=useState(false);const handleInputChange=(e,_ref)=>{let{name,value}=_ref;if(name==='username'){setUsername(value);}else if(name==='password'){setPassword(value);}};const handleSubmit=async e=>{e.preventDefault();if(!(username&&password)){setIsError(true);return;}try{const response=await backApi.authenticate(username,password);const{accessToken}=response.data;const data=parseJwt(accessToken);const authenticatedUser={data,accessToken};Auth.userLogin(authenticatedUser);setUsername('');setPassword('');setIsError(false);}catch(error){handleLogError(error);setIsError(true);}};if(isLoggedIn){return/*#__PURE__*/_jsx(Navigate,{to:'/'});}return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Grid,{textAlign:\"center\",children:/*#__PURE__*/_jsxs(Grid.Column,{style:{maxWidth:450,marginTop:'2em'},children:[/*#__PURE__*/_jsx(Form,{size:\"large\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(Segment,{children:[/*#__PURE__*/_jsx(Form.Input,{fluid:true,autoFocus:true,name:\"username\",icon:\"user\",iconPosition:\"left\",placeholder:\"Username\",value:username,onChange:handleInputChange}),/*#__PURE__*/_jsx(Form.Input,{fluid:true,name:\"password\",icon:\"lock\",iconPosition:\"left\",placeholder:\"Password\",type:\"password\",value:password,onChange:handleInputChange}),/*#__PURE__*/_jsx(Button,{color:\"violet\",fluid:true,size:\"large\",children:\"Login\"})]})}),/*#__PURE__*/_jsxs(Message,{children:[\"Don't have already an account? \",/*#__PURE__*/_jsx(NavLink,{to:\"/signup\",color:\"violet\",as:NavLink,children:\"Sign Up\"})]}),isError&&/*#__PURE__*/_jsx(Message,{negative:true,children:\"The username or password provided are incorrect!\"})]})}),/*#__PURE__*/_jsx(Footer,{})]});}export default Login;","map":{"version":3,"names":["React","useState","NavLink","Navigate","Button","Form","Grid","Segment","Message","Container","useAuth","backApi","parseJwt","handleLogError","Footer","jsx","_jsx","jsxs","_jsxs","Login","Auth","isLoggedIn","userIsAuthenticated","username","setUsername","password","setPassword","isError","setIsError","handleInputChange","e","_ref","name","value","handleSubmit","preventDefault","response","authenticate","accessToken","data","authenticatedUser","userLogin","error","to","children","textAlign","Column","style","maxWidth","marginTop","size","onSubmit","Input","fluid","autoFocus","icon","iconPosition","placeholder","onChange","type","color","as","negative"],"sources":["/Users/timurinamkhojayev/Desktop/demo-crypto/order-ui/src/components/home/Login.js"],"sourcesContent":["import React, { useState } from 'react'\nimport { NavLink, Navigate } from 'react-router-dom'\nimport {Button, Form, Grid, Segment, Message, Container} from 'semantic-ui-react'\nimport { useAuth } from '../context/AuthContext'\nimport { backApi } from '../misc/BackApi'\nimport { parseJwt, handleLogError } from '../misc/Helpers'\nimport Footer from \"../misc/Footer\";\n\nfunction Login() {\n  const Auth = useAuth()\n  const isLoggedIn = Auth.userIsAuthenticated()\n\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [isError, setIsError] = useState(false)\n\n  const handleInputChange = (e, { name, value }) => {\n    if (name === 'username') {\n      setUsername(value)\n    } else if (name === 'password') {\n      setPassword(value)\n    }\n  }\n\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n\n    if (!(username && password)) {\n      setIsError(true)\n      return\n    }\n\n    try {\n      const response = await backApi.authenticate(username, password)\n      const { accessToken } = response.data\n      const data = parseJwt(accessToken)\n      const authenticatedUser = { data, accessToken }\n\n      Auth.userLogin(authenticatedUser)\n\n      setUsername('')\n      setPassword('')\n      setIsError(false)\n    } catch (error) {\n      handleLogError(error)\n      setIsError(true)\n    }\n  }\n\n  if (isLoggedIn) {\n    return <Navigate to={'/'} />\n  }\n\n  return (\n      <Container >\n    <Grid textAlign='center'>\n      <Grid.Column style={{ maxWidth: 450 , marginTop: '2em'}}>\n        <Form size='large' onSubmit={handleSubmit}>\n          <Segment>\n            <Form.Input\n              fluid\n              autoFocus\n              name='username'\n              icon='user'\n              iconPosition='left'\n              placeholder='Username'\n              value={username}\n              onChange={handleInputChange}\n            />\n            <Form.Input\n              fluid\n              name='password'\n              icon='lock'\n              iconPosition='left'\n              placeholder='Password'\n              type='password'\n              value={password}\n              onChange={handleInputChange}\n            />\n            <Button color='violet' fluid size='large'>Login</Button>\n          </Segment>\n        </Form>\n        <Message>{`Don't have already an account? `}\n          <NavLink to=\"/signup\" color='violet' as={NavLink}>Sign Up</NavLink>\n        </Message>\n        {isError && <Message negative>The username or password provided are incorrect!</Message>}\n      </Grid.Column>\n    </Grid>\n        <Footer />\n      </Container>\n  )\n}\n\nexport default Login"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}